<!DOCTYPE html>
<html><head><meta charset="ISO-8859-1"><title>CJD &ndash; cjd.generate</title><link href="extensomatic.css" rel="stylesheet" type="text/css" /><link href="cjd.css" rel="stylesheet" type="text/css" /></head><body><div id="top"></div><div class="leader"><table><tbody><tr><td width="100%"><td align="right"><a href="index.html"><span class="headlink">Index</span></a></td></tr></tbody></table></div><div class="ns">cjd.generate</div><div class="desc"><p>HTML generation package for CJD. </p><p>The CJD HTML generation process starts with a forest of the rough abstract syntax trees constructed in the first phase of CJD processing. Roots of the trees correspond to namespaces, and lower nodes represent artifacts such as functions, vars, protocols, records, and the like, and then their components where applicable, such as methods. Each artifact or component contains its CJD documentation, if it existed in the source. </p><p><span id="gen-fun"></span> The large bulk of the functions here are <i>generator functions</i> of the form <code>(gen&#8209;something [<span class="n3">node</span> <span class="n3">context</span>])</code>, where </p><div class="s"><p class="a"><span class="n3">node</span> &mdash; Depending on the generation routine, this is usually either a <a href="cjd.core-elements.html#Node">Node</a> derivative object from the AST parsed from the CJD comment, or an <a href="cjd.artifact-base.html#Artifact">Artifact</a> derivative, parsed from a Clojure source file. Other variants are generally documented.</p><p class="a"><span class="n3">context</span> &mdash; The current <a href="cjd.context.html#Context">Context</a> object. </p></div><p class="a"><span class="k">Returns</span> &mdash; Unless stated otherwise, a string of HTML text.</p><p>Depending on the nature of the node, a generation function may make calls directly or indirectly (via a map) to other generation routines, possibly modifying the version of the context object it passes down. </p><p>It's worth noting that this is just one possible generator, and that there's no bar to generating others as well.</p></div><div class="desc"><table class="summary"><tbody><tr><td colspan="2"><p class="sum-hdr">Constructo Summary</p></td></tr><tr class="sum"><td><a href="#Overview">Overview</a></td><td><div class="blurb">A demented &quot;artifact&quot; to represent an overview comment, for compatibility with <a href="#init-context">init-context</a> and everything else.</div></td></tr><tr><td colspan="2"><p class="sum-hdr">Function/Macro Summary</p></td></tr><tr class="sum"><td><a href="#declaration-form">declaration&#8209;form</a></td><td><div class="blurb">Generates an HTML string from a form that declares or uses variables, such as function prototypes, forms appearing in <code>@(form ...)</code>, or names in <code>@(arg arg-name)</code>. </div></td></tr><tr class="sum"><td><a href="#gen-artifact">gen&#8209;artifact</a></td><td><div class="blurb">Generates detailed documentation for an artifact.</div></td></tr><tr class="sum"><td><a href="#gen-contextual-link">gen&#8209;contextual&#8209;link</a></td><td><div class="blurb">Returns a link denoting an artifact or component, with the link text denoting the name with or without namespace prepended, based on context.</div></td></tr><tr class="sum"><td><a href="#gen-desc">gen&#8209;desc</a></td><td><div class="blurb">Generation function for simple-minded artifacts, such as vars, where there's no substructure to contend with. This is also useful as a generator to get minimal support in place for non-core artifacts.</div></td></tr><tr class="sum"><td><a href="#gen-flow">gen&#8209;flow</a></td><td><div class="blurb">Generates HTML content for a CJD comment flow. </div></td></tr><tr class="sum"><td><a href="#gen-functional">gen&#8209;functional</a></td><td><div class="blurb">Generation function for function-like artifacts, such as functions and macros.</div></td></tr><tr class="sum"><td><a href="#gen-link">gen&#8209;link</a></td><td><div class="blurb">A <a href="#gen-fun">generator function</a> for <code>@link</code> and <code>@linki</code>.</div></td></tr><tr class="sum"><td><a href="#gen-linkto">gen&#8209;linkto</a></td><td><div class="blurb">A <a href="#gen-fun">generator function</a> for <code>@linkto</code>.</div></td></tr><tr class="sum"><td><a href="#gen-method-impl">gen&#8209;method&#8209;impl</a></td><td><div class="blurb">Generation function for method implementations within artifacts such as records. </div></td></tr><tr class="sum"><td><a href="#gen-multi">gen&#8209;multi</a></td><td><div class="blurb">Generation function for multimethod declarations.</div></td></tr><tr class="sum"><td><a href="#gen-namespace">gen&#8209;namespace</a></td><td><div class="blurb">Generates a full HTML document for a namespace.</div></td></tr><tr class="sum"><td><a href="#gen-overview">gen&#8209;overview</a></td><td><div class="blurb">Generates an &quot;overview&quot; page, the ultimate topmost supreme acme of the whole thing... or more specifically, the page that's &quot;index.html&quot;. </div></td></tr><tr class="sum"><td><a href="#gen-protocol">gen&#8209;protocol</a></td><td><div class="blurb">Generation function for protocols.</div></td></tr><tr class="sum"><td><a href="#gen-protocol-method">gen&#8209;protocol&#8209;method</a></td><td><div class="blurb">Generation function for method prototypes within protocols.</div></td></tr><tr class="sum"><td><a href="#gen-record-type">gen&#8209;record&#8209;type</a></td><td><div class="blurb">Generation function for records and types.</div></td></tr><tr class="sum"><td><a href="#gen-return">gen&#8209;return</a></td><td><div class="blurb">The <a href="#generator-function">generator function</a> for @return elements.</div></td></tr><tr class="sum"><td><a href="#gen-summary">gen&#8209;summary</a></td><td><div class="blurb">Generates a summary for namespace.</div></td></tr><tr class="sum"><td><a href="#gen-target">gen&#8209;target</a></td><td><div class="blurb">A <a href="#gen-fun">generator function</a> for user-specified targets, e.g. <code>@target</code>.</div></td></tr><tr class="sum"><td><a href="#get-blurb">get&#8209;blurb</a></td><td><div class="blurb">Retrieves the &quot;blurb&quot;, the first paragraph, of a CJD comment. </div></td></tr><tr class="sum"><td><a href="#lstr">lstr</a></td><td><div class="blurb">Generates an HTML class name from a single-letter &quot;code&quot; and a numeric level.</div></td></tr><tr class="sum"><td><a href="#mk-art">mk&#8209;art</a></td><td><div class="blurb">Adds artifact type information to the generator's artifact table. </div></td></tr><tr class="sum"><td><a href="#nonbreak">nonbreak</a></td><td><div class="blurb">Handly little thing that translates all &quot;-&quot; characters in a string into nonbreaking hyphens <code>&amp;#8209;</code>. </div></td></tr><tr><td colspan="2"><p class="sum-hdr">Variable Summary</p></td></tr><tr class="sum"><td><a href="#uncased-comparator">uncased&#8209;comparator</a></td><td><div class="blurb">A general-purpose <a href="http://download.oracle.com/javase/7/docs/api/java/util/Comparator.html">Comparator</a> that does its comparisons on an uncased basis.</div></td></tr></tbody></table></div><div class="artifact" id="declaration-form"><table class="topline"><tbody><tr><td><span class="itemname">declaration-form</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">declaration&#8209;form</span> [<span class="n1">form</span> <span class="n1">context</span>])</span></p><div class="desc"><p>Generates an HTML string from a form that declares or uses variables, such as function prototypes, forms appearing in <code>@(form ...)</code>, or names in <code>@(arg arg-name)</code>. </p><p><span class="n0">declaration-form</span> is the party responsible for determing what &quot;level&quot; within the comment text a name was &quot;declared&quot; at, and appropriately tagging the name to ensure correct colorization. </p><div class="s1"><p class="v1"><span class="k1">Arguments</span></p><p class="a1"><span class="n1">form</span> &mdash; The form for which generation is to be made. </p><p class="a1"><span class="n1">context</span> &mdash; The operative context object. </p></div><div><p class="i1"><span class="k1">Returns</span></p><p>The generated HTML string.</p></div></div></div><div class="artifact" id="gen-artifact"><table class="topline"><tbody><tr><td><span class="itemname">gen-artifact</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;artifact</span> [artifact context])</span></p><div class="desc"><p>Generates detailed documentation for an artifact.</p></div></div><div class="artifact" id="gen-contextual-link"><table class="topline"><tbody><tr><td><span class="itemname">gen-contextual-link</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;contextual&#8209;link</span> [artifact context])</span></p><div class="desc"><p>Returns a link denoting an artifact or component, with the link text denoting the name with or without namespace prepended, based on context.</p></div></div><div class="artifact" id="gen-desc"><table class="topline"><tbody><tr><td><span class="itemname">gen-desc</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;desc</span> [artifact context])</span></p><div class="desc"><p>Generation function for simple-minded artifacts, such as vars, where there's no substructure to contend with. This is also useful as a generator to get minimal support in place for non-core artifacts.</p></div></div><div class="artifact" id="gen-flow"><table class="topline"><tbody><tr><td><span class="itemname">gen-flow</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;flow</span> [<span class="n1">flow</span> <span class="n1">context</span> <span class="n1">extract&#8209;blurb</span>])</span></p><div class="desc"><p>Generates HTML content for a CJD comment flow. </p><p>The &quot;flow&quot; notion is defined implicitly: fundamentally, it's a sequence of flow-element nodes that are commonly contained within some scope (e.g., a comment as a whole, or within some parent flow.) </p><div class="s1"><p class="v1"><span class="k1">Arguments</span></p><p class="a1"><span class="n1">flow</span> &mdash; The flow to generate HTML for. Operationally, this is simply a sequence of flow-element nodes. </p><p class="a1"><span class="n1">context</span> &mdash; The context object for the flow. </p><p class="a1"><span class="n1">extract&#8209;blurb</span> &mdash; If true, the HTML string for the first paragraph of the flow is generated and returned separately for inclusion by the caller in some higher-level structure. </p></div><div><p class="i1"><span class="k1">Returns</span></p><p>A tuple of the form <code>[<span class="n2">upcontext</span> <span class="n2">blurb</span> <span class="n2">remainder</span>]</code>, where </p><div class="s"><p class="a"><span class="n2">upcontext</span> &mdash; <span class="n1">context</span> updated to include any named elements (e.g. arguments, options, fields) described by the flow. </p><p class="a"><span class="n2">blurb</span> &mdash; If <span class="n1">extract-blurb</span> is true, and the first element of the flow is a paragraph, then this is the HTML string of the <i>content</i> of initial paragraph. Note that this string <b>will not</b> be enclosed in paragraph tags! </p><p>Otherwise, this will be an empty value (nil or empty string).</p><p class="a"><span class="n2">remainder</span> &mdash; The HTML string of any content of flow not included in <span class="n2">blurb</span>.</p></div></div></div></div><div class="artifact" id="gen-functional"><table class="topline"><tbody><tr><td><span class="itemname">gen-functional</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;functional</span> [artifact context])</span></p><div class="desc"><p>Generation function for function-like artifacts, such as functions and macros.</p></div></div><div class="artifact" id="gen-link"><table class="topline"><tbody><tr><td><span class="itemname">gen-link</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;link</span> [node context])</span></p><div class="desc"><p>A <a href="#gen-fun">generator function</a> for <code>@link</code> and <code>@linki</code>.</p></div></div><div class="artifact" id="gen-linkto"><table class="topline"><tbody><tr><td><span class="itemname">gen-linkto</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;linkto</span> [node context])</span></p><div class="desc"><p>A <a href="#gen-fun">generator function</a> for <code>@linkto</code>.</p></div></div><div class="artifact" id="gen-method-impl"><table class="topline"><tbody><tr><td><span class="itemname">gen-method-impl</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;method&#8209;impl</span> [method&#8209;impl context])</span></p><div class="desc"><p>Generation function for method implementations within artifacts such as records. </p><p>Note that we do something slightly squirreley here and tag method implementations with a record name &quot;/&quot; method name ID, so as to disambiguate it with respect to other implementations, and the protocol method.</p></div></div><div class="artifact" id="gen-multi"><table class="topline"><tbody><tr><td><span class="itemname">gen-multi</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;multi</span> [artifact context])</span></p><div class="desc"><p>Generation function for multimethod declarations.</p></div></div><div class="artifact" id="gen-namespace"><table class="topline"><tbody><tr><td><span class="itemname">gen-namespace</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;namespace</span> [ns&#8209;artifact context])</span></p><div class="desc"><p>Generates a full HTML document for a namespace.</p></div></div><div class="artifact" id="gen-overview"><table class="topline"><tbody><tr><td><span class="itemname">gen-overview</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;overview</span> [<span class="n1">ns&#8209;artifacts</span> <span class="n1">context</span>])</span></p><div class="desc"><p>Generates an &quot;overview&quot; page, the ultimate topmost supreme acme of the whole thing... or more specifically, the page that's &quot;index.html&quot;. </p><div class="s1"><p class="v1"><span class="k1">Arguments</span></p><p class="a1"><span class="n1">ns&#8209;artifacts</span> &mdash; A collection of <a href="cjd.artifact-base.html#Artifact">Artifact</a> objects to be included in the overview. </p><p class="a1"><span class="n1">context</span> &mdash; The operative context. </p></div><div><p class="i1"><span class="k1">Returns</span></p><p>The HTML page.</p></div></div></div><div class="artifact" id="gen-protocol"><table class="topline"><tbody><tr><td><span class="itemname">gen-protocol</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;protocol</span> [artifact context])</span></p><div class="desc"><p>Generation function for protocols.</p></div></div><div class="artifact" id="gen-protocol-method"><table class="topline"><tbody><tr><td><span class="itemname">gen-protocol-method</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;protocol&#8209;method</span> [artifact context])</span></p><div class="desc"><p>Generation function for method prototypes within protocols.</p></div></div><div class="artifact" id="gen-record-type"><table class="topline"><tbody><tr><td><span class="itemname">gen-record-type</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;record&#8209;type</span> [artifact context])</span></p><div class="desc"><p>Generation function for records and types.</p></div></div><div class="artifact" id="gen-return"><table class="topline"><tbody><tr><td><span class="itemname">gen-return</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;return</span> [node context])</span></p><div class="desc"><p>The <a href="#generator-function">generator function</a> for @return elements.</p></div></div><div class="artifact" id="gen-summary"><table class="topline"><tbody><tr><td><span class="itemname">gen-summary</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;summary</span> [ns&#8209;artifact context])</span></p><div class="desc"><p>Generates a summary for namespace.</p></div></div><div class="artifact" id="gen-target"><table class="topline"><tbody><tr><td><span class="itemname">gen-target</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">gen&#8209;target</span> [node context])</span></p><div class="desc"><p>A <a href="#gen-fun">generator function</a> for user-specified targets, e.g. <code>@target</code>.</p></div></div><div class="artifact" id="get-blurb"><table class="topline"><tbody><tr><td><span class="itemname">get-blurb</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">get&#8209;blurb</span> [<span class="n1">flow</span> <span class="n1">context</span>])</span></p><div class="desc"><p>Retrieves the &quot;blurb&quot;, the first paragraph, of a CJD comment. </p><p>By weak convention, the first paragraph of an artifact's description is a terse description of what the artifact does to justify its existence, and as such, is useful in places like summaries. </p><div class="s1"><p class="v1"><span class="k1">Arguments</span></p><p class="a1"><span class="n1">flow</span> &mdash; The flow from which to extract the blurb. </p><p class="a1"><span class="n1">context</span> &mdash; The operative context object. </p></div><div><p class="i1"><span class="k1">Returns</span></p><p>The blurb, generally a <a href="cjd.core-elements.html#Paragraph">Paragraph</a> object, if there is one, or nil if not.</p></div></div></div><div class="artifact" id="lstr"><table class="topline"><tbody><tr><td><span class="itemname">lstr</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">lstr</span> [code level])</span></p><div class="desc"><p>Generates an HTML class name from a single-letter &quot;code&quot; and a numeric level.</p></div></div><div class="artifact" id="mk-art"><table class="topline"><tbody><tr><td><span class="itemname">mk-art</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">mk&#8209;art</span> [<span class="n1">artifact&#8209;class</span> <span class="n1">gen&#8209;fn</span> <span class="n1">category</span>])</span></p><div class="desc"><p>Adds artifact type information to the generator's artifact table. </p><div class="s1"><p class="v1"><span class="k1">Arguments</span></p><p class="a1"><span class="n1">artifact&#8209;class</span> &mdash; The class of <span class="nx">Artifact</span> -derivative object to be added. </p><p class="a1"><span class="n1">gen&#8209;fn</span> &mdash; A function for generating HTML when the generation process encounters an artifact of the type given by <span class="n1">artifact-class</span>. This function is always called from <a href="#gen-artifact">gen-artifact</a>, which produces the generic artifact HTML support. <span class="n1">gen-fn</span> is responsible for producing additional detail, and for motivating generation of any component substructure the artifact might have. </p><p><span class="n1">gen-fn</span> has the form <code>(fn [<span class="n2">artifact</span> <span class="n2">context</span>])</code>, where </p><div class="s"><p class="a"><span class="n2">artifact</span> &mdash; The artifact to generate for. </p><p class="a"><span class="n2">context</span> &mdash; The context object in effect. </p></div><p class="a"><span class="k">Returns</span> &mdash; The generated HTML text.</p><p class="a1"><span class="n1">category</span> &mdash; A keyword that identifies the category that this class of artifacts is to be lumped into for summarization purposes. See <a href="#mk-category">mk-category</a> for details.</p></div></div></div><div class="artifact" id="nonbreak"><table class="topline"><tbody><tr><td><span class="itemname">nonbreak</span></td><td align="right"><span class="itemtype">function</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">nonbreak</span> [sym])</span></p><div class="desc"><p>Handly little thing that translates all &quot;-&quot; characters in a string into nonbreaking hyphens <code>&amp;#8209;</code>. </p><div class="s1"><p class="v1"><span class="k1">Arguments</span></p><p class="a1"><span class="n1">Anything</span> &mdash; that renders a string (it gets run through <a href="http://clojuredocs.org/clojure_core/clojure.core/str">str</a>.) </p></div><div><p class="i1"><span class="k1">Returns</span></p><p>The re-hyphenated string.</p></div></div></div><div class="artifact" id="Overview"><table class="topline"><tbody><tr><td><span class="itemname">Overview</span></td><td align="right"><span class="itemtype">constructo</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">Overview</span> [])</span></p><div class="desc"><p>A demented &quot;artifact&quot; to represent an overview comment, for compatibility with <a href="#init-context">init-context</a> and everything else.</p><div class="s1"><p class="v1"><span class="k1">Composed extensos</span></p><p class="a1"><a href="cjd.artifact-base.html#ArtifactBase">ArtifactBase</a><span class="expr"> [<span class="ex-init">artifact-name</span> <span class="ex-init">artifact-namespace</span> <span class="ex-init">def-file</span> <span class="ex-init">def-line</span>] </span><a href="cjd.artifact-base.html#artifact-name-of">artifact&#8209;name&#8209;of</a>&emsp;<a href="cjd.artifact-base.html#defined-at">defined&#8209;at</a>&emsp;<a href="cjd.artifact-base.html#defined-in">defined&#8209;in</a>&emsp;<a href="cjd.artifact-base.html#namespace-of">namespace&#8209;of</a></p><p class="a1"><a href="cjd.artifact-base.html#HasCJDoc">HasCJDoc</a><span class="expr"> [<span class="ex-init">doc-form</span>] </span><a href="cjd.artifact-base.html#doc-form-of">doc&#8209;form&#8209;of</a>&emsp;<a href="cjd.artifact-base.html#has-doc?">has&#8209;doc?</a></p></div></div></div><div class="artifact" id="uncased-comparator"><table class="topline"><tbody><tr><td><span class="itemname">uncased-comparator</span></td><td align="right"><span class="itemtype">var</span> in <a href="#top">cjd.generate</a></td></tr></tbody></table><div class="desc"><p>A general-purpose <a href="http://download.oracle.com/javase/7/docs/api/java/util/Comparator.html">Comparator</a> that does its comparisons on an uncased basis.</p></div></div><div class="trailer"><span class="ending">Generated by <a href="https://github.com/greenh/CJD">CJD</a> 0.0.2-SNAPSHOT under Clojure 1.2.1  on 13 January 2012 20:43 PST</span></div><div style="margin-top: 1mm; margin-bottom: 4mm; text-align: center; width: 100%;"><span style="font-size: 8pt;">Copyright &copy; 2012 Howard Green. All rights reserved.</span></div></body></html>