<!DOCTYPE html>
<html><head><meta charset="ISO-8859-1"><title>Clojure 1.4.0 &ndash; clojure.test</title><link href="cjd.css" rel="stylesheet" type="text/css" /></head><body><div id="top"></div><div class="leader"><table><tbody><tr><td width="100%"><td align="right"><a href="index.html"><span class="headlink">Index</span></a></td></tr></tbody></table></div><div class="ns">clojure.test</div><div class="desc"><table class="summary"><tbody><tr><td colspan="2"><p class="sum-hdr">Function/Macro Summary</p></td></tr><tr class="sum"><td><a href="#are">are</a></td><td><pre class="preblurb">Checks multiple assertions with a template expression.</pre></td></tr><tr class="sum"><td><a href="#assert-any">assert&#8209;any</a></td><td><pre class="preblurb">Returns generic assertion code for any test, including macros, Java...</pre></td></tr><tr class="sum"><td><a href="#assert-predicate">assert&#8209;predicate</a></td><td><pre class="preblurb">Returns generic assertion code for any functional predicate.  The...</pre></td></tr><tr class="sum"><td><a href="#compose-fixtures">compose&#8209;fixtures</a></td><td><pre class="preblurb">Composes two fixture functions, creating a new fixture function...</pre></td></tr><tr class="sum"><td><a href="#deftest">deftest</a></td><td><pre class="preblurb">Defines a test function with no arguments.  Test functions may call...</pre></td></tr><tr class="sum"><td><a href="#deftest-">deftest&#8209;</a></td><td><pre class="preblurb">Like deftest but creates a private var.</pre></td></tr><tr class="sum"><td><a href="#do-report">do&#8209;report</a></td><td><pre class="preblurb">Add file and line information to a test result and call report.</pre></td></tr><tr class="sum"><td><a href="#file-position">file&#8209;position</a></td><td><pre class="preblurb">Returns a vector [filename line-number] for the nth call up the...</pre></td></tr><tr class="sum"><td><a href="#function?">function?</a></td><td><pre class="preblurb">Returns true if argument is a function or a symbol that resolves to...</pre></td></tr><tr class="sum"><td><a href="#get-possibly-unbound-var">get&#8209;possibly&#8209;unbound&#8209;var</a></td><td><pre class="preblurb">Like var-get but returns nil if the var is unbound.</pre></td></tr><tr class="sum"><td><a href="#inc-report-counter">inc&#8209;report&#8209;counter</a></td><td><pre class="preblurb">Increments the named counter in *report-counters*, a ref to a map.</pre></td></tr><tr class="sum"><td><a href="#is">is</a></td><td><pre class="preblurb">Generic assertion macro.  'form' is any predicate test.</pre></td></tr><tr class="sum"><td><a href="#join-fixtures">join&#8209;fixtures</a></td><td><pre class="preblurb">Composes a collection of fixtures, in order.  Always returns a valid...</pre></td></tr><tr class="sum"><td><a href="#run-all-tests">run&#8209;all&#8209;tests</a></td><td><pre class="preblurb">Runs all tests in all namespaces; prints results.</pre></td></tr><tr class="sum"><td><a href="#run-tests">run&#8209;tests</a></td><td><pre class="preblurb">Runs all tests in the given namespaces; prints results.</pre></td></tr><tr class="sum"><td><a href="#set-test">set&#8209;test</a></td><td><pre class="preblurb">Experimental.</pre></td></tr><tr class="sum"><td><a href="#successful?">successful?</a></td><td><pre class="preblurb">Returns true if the given test summary indicates all tests...</pre></td></tr><tr class="sum"><td><a href="#test-all-vars">test&#8209;all&#8209;vars</a></td><td><pre class="preblurb">Calls test-var on every var interned in the namespace, with fixtures.</pre></td></tr><tr class="sum"><td><a href="#test-ns">test&#8209;ns</a></td><td><pre class="preblurb">If the namespace defines a function named test-ns-hook, calls that.</pre></td></tr><tr class="sum"><td><a href="#test-var">test&#8209;var</a></td><td><pre class="preblurb">If v has a function in its :test metadata, calls that function,...</pre></td></tr><tr class="sum"><td><a href="#testing">testing</a></td><td><pre class="preblurb">Adds a new string to the list of testing contexts.  May be nested,...</pre></td></tr><tr class="sum"><td><a href="#testing-contexts-str">testing&#8209;contexts&#8209;str</a></td><td><pre class="preblurb">Returns a string representation of the current test context. Joins...</pre></td></tr><tr class="sum"><td><a href="#testing-vars-str">testing&#8209;vars&#8209;str</a></td><td><pre class="preblurb">Returns a string representation of the current test.  Renders names...</pre></td></tr><tr class="sum"><td><a href="#try-expr">try&#8209;expr</a></td><td><pre class="preblurb">Used by the 'is' macro to catch unexpected exceptions.</pre></td></tr><tr class="sum"><td><a href="#with-test">with&#8209;test</a></td><td><pre class="preblurb">Takes any definition form (that returns a Var) as the first argument.</pre></td></tr><tr class="sum"><td><a href="#with-test-out">with&#8209;test&#8209;out</a></td><td><pre class="preblurb">Runs body with *out* bound to the value of *test-out*.</pre></td></tr><tr><td colspan="2"><p class="sum-hdr">Multimethod Summary</p></td></tr><tr class="sum"><td><a href="#report">report</a></td><td><pre class="preblurb">Generic reporting function, may be overridden to plug in...</pre></td></tr><tr><td colspan="2"><p class="sum-hdr">Variable Summary</p></td></tr><tr class="sum"><td><a href="#*load-tests*">*load&#8209;tests*</a></td><td><pre class="preblurb">True by default.  If set to false, no test functions will...</pre></td></tr><tr class="sum"><td><a href="#*stack-trace-depth*">*stack&#8209;trace&#8209;depth*</a></td><td><pre class="preblurb">The maximum depth of stack traces to print when an Exception...</pre></td></tr></tbody></table></div><div class="artifact" id="*load-tests*"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L244">*load-tests*</a></td><td align="right"><a href="clojure.core.html#defonce">defonce</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><div class="desc"><pre class="doc">True by default.  If set to false, no test functions will
 be created by deftest, set-test, or with-test.  Use this to omit
 tests when compiling or loading production code.</pre></div></div><div class="artifact" id="*stack-trace-depth*"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L251">*stack-trace-depth*</a></td><td align="right"><a href="http://clojure.org/special_forms#Special%20Forms--%28def%20symbol%20init?%29">def</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><div class="desc"><pre class="doc">The maximum depth of stack traces to print when an Exception
is thrown during a test.  Defaults to nil, which means print the 
complete stack trace.</pre></div></div><div class="artifact" id="are"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L556">are</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">are</span> [argv expr &amp; args])</span></p><div class="desc"><pre class="doc">Checks multiple assertions with a template expression.
See clojure.template/do-template for an explanation of
templates.

Example: (are [x y] (= x y)  
              2 (+ 1 1)
              4 (* 2 2))
Expands to: 
         (do (is (= 2 (+ 1 1)))
             (is (= 4 (* 2 2))))

Note: This breaks some reporting features, such as line numbers.</pre></div></div><div class="artifact" id="assert-any"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L439">assert-any</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">assert&#8209;any</span> [msg form])</span></p><div class="desc"><pre class="doc">Returns generic assertion code for any test, including macros, Java
method calls, or isolated symbols.</pre></div></div><div class="artifact" id="assert-predicate"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L420">assert-predicate</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">assert&#8209;predicate</span> [msg form])</span></p><div class="desc"><pre class="doc">Returns generic assertion code for any functional predicate.  The
'expected' argument to 'report' will contains the original form, the
'actual' argument will contain the form with all its sub-forms
evaluated.  If the predicate returns false, the 'actual' form will
be wrapped in (not...).</pre></div></div><div class="artifact" id="compose-fixtures"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L673">compose-fixtures</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">compose&#8209;fixtures</span> [f1 f2])</span></p><div class="desc"><pre class="doc">Composes two fixture functions, creating a new fixture function
that combines their behavior.</pre></div></div><div class="artifact" id="deftest"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L606">deftest</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">deftest</span> [name &amp; body])</span></p><div class="desc"><pre class="doc">Defines a test function with no arguments.  Test functions may call
other tests, so tests may be composed.  If you compose tests, you
should also define a function named test-ns-hook; run-tests will
call test-ns-hook instead of testing all vars.

Note: Actually, the test body goes in the :test metadata on the var,
and the real function (the value of the var) calls test-var on
itself.

When *load-tests* is false, deftest is ignored.</pre></div></div><div class="artifact" id="deftest-"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L623">deftest-</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">deftest&#8209;</span> [name &amp; body])</span></p><div class="desc"><pre class="doc">Like deftest but creates a private var.</pre></div></div><div class="artifact" id="do-report"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L340">do-report</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">do&#8209;report</span> [m])</span></p><div class="desc"><pre class="doc">Add file and line information to a test result and call report.
 If you are writing a custom assert-expr method, call this function
 to pass test results to report.</pre></div></div><div class="artifact" id="file-position"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L281">file-position</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">file&#8209;position</span> [n])</span></p><div class="desc"><pre class="doc">Returns a vector [filename line-number] for the nth call up the
stack.

Deprecated in 1.2: The information needed for test reporting is
now on :file and :line keys in the result map.</pre></div></div><div class="artifact" id="function?"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L408">function?</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">function?</span> [x])</span></p><div class="desc"><pre class="doc">Returns true if argument is a function or a symbol that resolves to
a function (not a macro).</pre></div></div><div class="artifact" id="get-possibly-unbound-var"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L400">get-possibly-unbound-var</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">get&#8209;possibly&#8209;unbound&#8209;var</span> [v])</span></p><div class="desc"><pre class="doc">Like var-get but returns nil if the var is unbound.</pre></div></div><div class="artifact" id="inc-report-counter"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L313">inc-report-counter</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">inc&#8209;report&#8209;counter</span> [name])</span></p><div class="desc"><pre class="doc">Increments the named counter in *report-counters*, a ref to a map.
Does nothing if *report-counters* is nil.</pre></div></div><div class="artifact" id="is"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L538">is</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">is</span> [form])</span></p><p class="decl"><span class="expr">(<span class="n0">is</span> [form msg])</span></p><div class="desc"><pre class="doc">Generic assertion macro.  'form' is any predicate test.
'msg' is an optional message to attach to the assertion.

Example: (is (= 4 (+ 2 2)) "Two plus two should be 4")

Special forms:

(is (thrown? c body)) checks that an instance of c is thrown from
body, fails if not; then returns the thing thrown.

(is (thrown-with-msg? c re body)) checks that an instance of c is
thrown AND that the message on the exception matches (with
re-find) the regular expression re.</pre></div></div><div class="artifact" id="join-fixtures"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L680">join-fixtures</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">join&#8209;fixtures</span> [fixtures])</span></p><div class="desc"><pre class="doc">Composes a collection of fixtures, in order.  Always returns a valid
fixture function, even if the collection is empty.</pre></div></div><div class="artifact" id="report"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L324">report</a></td><td align="right"><a href="clojure.core.html#defmulti">defmulti</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><div class="desc"><pre class="doc">Generic reporting function, may be overridden to plug in
 different report formats (e.g., TAP, JUnit).  Assertions such as
 'is' call 'report' to indicate results.  The argument given to
 'report' will be a map with a :type key.  See the documentation at
 the top of test_is.clj for more information on the types of
 arguments for 'report'.</pre></div></div><div class="artifact" id="run-all-tests"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L756">run-all-tests</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">run&#8209;all&#8209;tests</span> [])</span></p><p class="decl"><span class="expr">(<span class="n0">run&#8209;all&#8209;tests</span> [re])</span></p><div class="desc"><pre class="doc">Runs all tests in all namespaces; prints results.
Optional argument is a regular expression; only namespaces with
names matching the regular expression (with re-matches) will be
tested.</pre></div></div><div class="artifact" id="run-tests"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L744">run-tests</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">run&#8209;tests</span> [])</span></p><p class="decl"><span class="expr">(<span class="n0">run&#8209;tests</span> [&amp; namespaces])</span></p><div class="desc"><pre class="doc">Runs all tests in the given namespaces; prints results.
Defaults to current namespace if none given.  Returns a map
summarizing test results.</pre></div></div><div class="artifact" id="set-test"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L632">set-test</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">set&#8209;test</span> [name &amp; body])</span></p><div class="desc"><pre class="doc">Experimental.
Sets :test metadata of the named var to a fn with the given body.
The var must already exist.  Does not modify the value of the var.

When *load-tests* is false, set-test is ignored.</pre></div></div><div class="artifact" id="successful?"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L765">successful?</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">successful?</span> [summary])</span></p><div class="desc"><pre class="doc">Returns true if the given test summary indicates all tests
were successful, false otherwise.</pre></div></div><div class="artifact" id="test-all-vars"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L707">test-all-vars</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">test&#8209;all&#8209;vars</span> [ns])</span></p><div class="desc"><pre class="doc">Calls test-var on every var interned in the namespace, with fixtures.</pre></div></div><div class="artifact" id="test-ns"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L719">test-ns</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">test&#8209;ns</span> [ns])</span></p><div class="desc"><pre class="doc">If the namespace defines a function named test-ns-hook, calls that.
Otherwise, calls test-all-vars on the namespace.  'ns' is a
namespace object or a symbol.

Internally binds *report-counters* to a ref initialized to
*inital-report-counters*.  Returns the final, dereferenced state of
*report-counters*.</pre></div></div><div class="artifact" id="test-var"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L692">test-var</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">test&#8209;var</span> [v])</span></p><div class="desc"><pre class="doc">If v has a function in its :test metadata, calls that function,
with *testing-vars* bound to (conj *testing-vars* v).</pre></div></div><div class="artifact" id="testing"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L581">testing</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">testing</span> [string &amp; body])</span></p><div class="desc"><pre class="doc">Adds a new string to the list of testing contexts.  May be nested,
but must occur inside a test function (deftest).</pre></div></div><div class="artifact" id="testing-contexts-str"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L306">testing-contexts-str</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">testing&#8209;contexts&#8209;str</span> [])</span></p><div class="desc"><pre class="doc">Returns a string representation of the current test context. Joins
strings in *testing-contexts* with spaces.</pre></div></div><div class="artifact" id="testing-vars-str"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L293">testing-vars-str</a></td><td align="right"><a href="clojure.core.html#defn">defn</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">testing&#8209;vars&#8209;str</span> [m])</span></p><div class="desc"><pre class="doc">Returns a string representation of the current test.  Renders names
in *testing-vars* as a list, then the source file and line of
current assertion.</pre></div></div><div class="artifact" id="try-expr"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L522">try-expr</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">try&#8209;expr</span> [msg form])</span></p><div class="desc"><pre class="doc">Used by the 'is' macro to catch unexpected exceptions.
You don't call this.</pre></div></div><div class="artifact" id="with-test"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L593">with-test</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">with&#8209;test</span> [definition &amp; body])</span></p><div class="desc"><pre class="doc">Takes any definition form (that returns a Var) as the first argument.
Remaining body goes in the :test metadata function for that Var.

When *load-tests* is false, only evaluates the definition, ignoring
the tests.</pre></div></div><div class="artifact" id="with-test-out"><table class="topline"><tbody><tr><td><a class="itemname" href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj#L272">with-test-out</a></td><td align="right"><a href="clojure.core.html#defmacro">defmacro</a> in <a href="#top">clojure.test</a></td></tr></tbody></table><p class="decl"><span class="expr">(<span class="n0">with&#8209;test&#8209;out</span> [&amp; body])</span></p><div class="desc"><pre class="doc">Runs body with *out* bound to the value of *test-out*.</pre></div></div><div class="trailer"><span class="ending">Generated by <a href="https://github.com/greenh/CJD">CJD</a> 0.1.0 under Clojure 1.4.0  on 14 December 2012 20:22 PST</span></div></body></html>